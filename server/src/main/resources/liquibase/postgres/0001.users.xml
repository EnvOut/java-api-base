<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
	xmlns="http://www.liquibase.org/xml/ns/dbchangelog/1.7"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog/1.7
         http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-1.7.xsd">

	<changeSet id="0001-create-users-table" author="Eugene A. Kalosha">

		<sql>
			CREATE TABLE users
			(
				id serial,
				email character varying (128) NOT NULL,
				password character varying (65) DEFAULT NULL,
				created_at timestamp without time zone NOT NULL DEFAULT now(),
				updated_at timestamp without time zone NOT NULL DEFAULT now(),
				CONSTRAINT users_pk PRIMARY KEY (id)
			);

			CREATE UNIQUE INDEX ui_users_email ON users (email);
			CREATE INDEX i_users_created_at ON users (created_at);
			CREATE INDEX i_users_updated_at ON users (updated_at);

			INSERT INTO users (email, password) VALUES ('test@email.com', null);
		</sql>

		<rollback>
			<dropTable tableName="users"/>
		</rollback>
	</changeSet>

</databaseChangeLog>
